<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8" />
    <title>Flock XR - Creative coding in 3D</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover"
    />

    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link rel="manifest" href="/flock/manifest.webmanifest" />
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml" />

    <meta name="theme-color" content="#800080" />
    <style>
      /*
      .blocklyText {
          fill: black !important;
          
      }

      .zelos-renderer.classic-theme .blocklyDropDownText {
          fill: black !important; 

      }

      .zelos-renderer.classic-theme .blocklyDropdownText {
          fill: black !important; 

      }*/

      .zelos-renderer.classic-theme .blocklyEditableText {
        cursor: pointer !important;
      }

      .zelos-renderer.classic-theme .blocklyText,
      .zelos-renderer.classic-theme .blocklyFlyoutLabelText {
        font-weight: 500 !important;
        font-family: "Asap", Helvetica, Arial, Lucida, sans-serif !important;
      }

      .blocklyTreeLabel {
        font-weight: normal !important;
        font-family: "Asap", Helvetica, Arial, Lucida, sans-serif !important;
      }

      .blocklyDropDownArrow {
        cursor: pointer;
      }

      .blockly-ws-search {
        background: white;
        border: solid lightgrey 0.5px;
        box-shadow: 0px 10px 20px grey;
        justify-content: center;
        padding: 0.25em;
        position: absolute;
        z-index: 70;
      }

      .blockly-ws-search {
        background: white;
        margin-top: 5px;
        border: solid #ee5d6c 4px;
        box-shadow: 0px 10px 20px grey;
        justify-content: center;
        padding: 0.25em;
        position: absolute;
        z-index: 70;
      }

      path.blocklyPath.blockly-ws-search-highlight {
        fill: #ed808b;
      }

      path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {
        fill: #ee5d6c;
      }

      html,
      body {
        overflow: hidden;
        margin: 0;
        padding: 0;
        touch-action: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
        -webkit-tap-highlight-color: transparent;
      }

      html, body {
        height: 100vh;
        width: 100vw;
      }

      #renderCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        outline: none;
      }
      body {
       /* min-height: calc(100% + env(safe-area-inset-top));
        padding: env(safe-area-inset-top) env(safe-area-inset-right)
          env(safe-area-inset-bottom) env(safe-area-inset-left);*/

        display: flex;
        flex-wrap: wrap;
        height: 100vh;
        margin: 0px;
        gap: 0;
        box-sizing: border-box;
        font-family: "Asap", Helvetica, Arial, Lucida, sans-serif !important;
      }

      #maincontent {
        width: 100vw;
        height: 100%;
        display: flex;
        flex-wrap: wrap;
        margin: 0px;
        gap: 0;
      }

      input,
      textarea,
      button {
        font-family: inherit;
      }

      button,
      textarea,
      input {
        -webkit-user-select: none; /* Disable selection in Safari and Chrome */
        -moz-user-select: none; /* Disable selection in Firefox */
        -ms-user-select: none; /* Disable selection in Internet Explorer/Edge */
        user-select: none; /* Standard syntax to disable text selection */

        -webkit-touch-callout: none; /* Disable the callout (popup menu) on long press in mobile Safari */
        -webkit-tap-highlight-color: transparent; /* Remove highlight color when tapping on buttons */
      }

      #menu {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
        justify-content: space-between;
        max-width: 100vw;
        gap: 5px;
        z-index: 10;
        background-color: rgba(255, 255, 255, 0.9);
        padding: 0px;
        border-radius: 5px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
      }

      #menuleft,
      #menumiddle,
      #menuright {
        display: flex;
        flex-wrap: nowrap;
        align-items: center;
      }

      #codePanelButtons {
        display: flex;
        height: 37.6px;
        justify-content: space-between;
        flex-shrink: 0;
        border: none;
      }

      .stackedContainer {
        display: flex;
        flex-direction: column;
        padding: 5px;
        gap: 5px;
      }

      .stackedContainer input[type="text"],
      .stackedContainer select {
        padding: 5px;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 14px;
        min-width: 50px;
      }

      .stackedContainer select.highlighted {
        border: 4px solid #defd6c;
        padding: 5px;
        background-color: #f9f9f9;
      }

      .stackedContainer input[type="text"]:focus,
      .stackedContainer select:focus {
        border-color: #4caf50;
        outline: none;
      }

      .bigbutton {
        display: inline-block;
        margin: 0;
        padding: 5px 5px;
        font-size: 18px;
        background-color: #f0f0f0;
        color: black;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        touch-action: manipulation;
      }

      .bigbutton:hover {
        background-color: #e0e0e0;
      }

      .highlighted {
        border: 4px solid #ee5d6c;
        padding: 5px;
        background-color: #f9f9f9;
      }

      #codePanel,
      #rightArea {
        flex-basis: 50%;
        flex-grow: 1;
        flex-shrink: 1;
        max-width: 100vw;
        min-width: min(330px, 100vw);
      }

      #logo {
        width: 54px; /* or height: auto */
        height: auto;
        flex-shrink: 0; /* Prevent the image from shrinking inside a flex container */
        margin-right: 10px;
        padding-left: 5px; /* Add left padding */
      }

      #codePanel {
        height: 100%;
        border: none;
      }

      #blocklyDiv {
        height: 100%;
        border: none;
        width: 100%;
      }

      #renderCanvas {
        width: 100%;
        height: auto;
      }

      .gizmo-buttons {
        display: flex;
        flex-wrap: wrap;
        margin-top: 0px;
        gap: 5px;
        padding: 5px;
        box-sizing: border-box;
      }

      .gizmo-button {
        padding: 5px 5px;
        font-size: 12px;
        cursor: pointer;
        border-radius: 5px;
        border: none;
        background-color: #317873;
        color: white;
      }

      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        max-width: 200px; /* Optional: Set a maximum width */
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
        border-radius: 5px;
        white-space: nowrap;
      }

      .dropdown-content button {
        font-size: 1em;
      }

      .dropdown {
        position: relative; /* Ensure the dropdown is positioned relative to its container */
      }

      .dropdown-content {
        right: 0; /* Align the dropdown content to the right side of the button */
        left: auto; /* Override left positioning */
      }

      .dropdown:hover .dropdown-content {
        display: block;
      }

      .gizmo-buttons {
        display: flex;
        gap: 10px;
        padding: 10px;
        box-sizing: border-box;
        margin-top: auto;
      }

      #shape-menu {
        position: relative;
        display: inline-block;
      }

      #shapes-dropdown {
        position: absolute;
        bottom: -50px;
        left: 0;
        display: block;
        background-color: rgba(1, 1, 1, 0.5);
        padding: 10px;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
        width: 320px;
        overflow: hidden; /* Ensure no visible overflow */
      }

      /* Horizontal layout for shape and model rows */
      #shapes-dropdown ul {
        display: flex;
        padding: 0;
        margin: 2px;
        list-style: none;
        gap: 4px;
        overflow-x: auto; /* Enable horizontal scrolling */
        scroll-behavior: smooth;
        white-space: nowrap;
        scrollbar-width: none; /* Hide scrollbar in Firefox */
      }

      #shapes-dropdown ul::-webkit-scrollbar {
        display: none; /* Hide scrollbar in Chrome, Safari, and other WebKit browsers */
      }

      #shapes-dropdown ul li {
        background-color: rgba(255, 255, 255, 0.5);
        border-radius: 5px;
        padding: 5px;
        display: inline-block;
        cursor: pointer;
      }

      #shapes-dropdown ul li img {
        width: 50px;
        height: 50px;
      }

      #shapes-dropdown ul li:hover {
        background-color: rgba(255, 255, 255, 0.7);
      }

      #shapes-dropdown ul li:hover img {
        transform: scale(1.2);
      }

      /* Container for scrollable content with arrows */
      .scrollable-container {
        position: relative;
        display: flex;
        align-items: center;
        width: 100%;
      }

      #model-row {
        overflow-x: hidden; /* Hide the scroll bar but allow content scrolling */
        white-space: nowrap;
        flex-grow: 1;
        display: flex;
        gap: 10px;
      }

      /* Arrow buttons for scrolling */
      .scroll-button {
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        cursor: pointer;
        font-size: 18px;
        padding: 5px 10px;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        width: 30px;
        height: 30px;
      }

      .scroll-button.left {
        left: -15px; /* Align with the left edge of the container */
      }

      .scroll-button.right {
        right: -15px; /* Align with the right edge of the container */
      }

      #scene-explorer-host #commands {
        display: none !important;
      }

      #inspector-host #commands {
        display: none !important;
      }
    </style>
  </head>

  <body>
    <input type="file" id="importFile" style="display: none" accept=".json" />

    <div id="flockeditor">
      <div id="menu">
        <div id="menuleft">
          <img src="images/FlockLogo.png" alt="Flock bird logo" id="logo" />
          <button class="bigbutton" id="runCodeButton" title="Run your code">
            ▶️
          </button>
          <button class="bigbutton" id="stopCodeButton" title="Stop your code">
            🛑
          </button>
          <button
            class="bigbutton"
            title="Open a project from a file on your computer"
          >
            <input type="file" id="fileInput" style="display: none" disabled />
            <label for="fileInput">📂</label>
          </button>
            <input type="text" style="flex-shrink: 1; width: 100%; min-width: 10px; max-width: 80px;" id="projectName" placeholder="Project name" />
          <button
            class="bigbutton"
            id="exportCodeButton"
            title="Save this project to a file on your computer."
          >
            💾
          </button>
          <select
            id="exampleSelect"
            class="bigbutton"
            title="Choose an example project to load."
            disabled
          >
            <option value="">🌴</option>
            <option value="examples/simple_starter.json">
              👋🏽Simple Starter
            </option>
            <option value="examples/controller_starter.json">
              🎮Controller Starter
            </option>
            <option value="examples/forest_base.json">🌲Forest Base</option>
            <option value="examples/character_animation.json">
              🎥Character Animation
            </option>
            <option value="examples/cube_art.json">🎨 Cube Art</option>
            <option value="examples/physics_fun.json">👆🏾Physics Fun</option>
            <option value="examples/collect_the_gems.json">
              💎 Collect the Gems
            </option>
            <option value="examples/water_map.json">💧 Water Map</option>
            <option value="examples/skittles.json">🎳 Skittles</option>
            <option value="examples/beetle.json">🪲 Beetle</option>
            <option value="examples/roominator.json">🛋️Roominator</option>
            <option value="examples/ball_pit.json">🟠 Ball Pit</option>
            <option value="examples/ur_enough.json">💗 UR Enough!</option>
            <option value="examples/tallest_buildings.json">
              📊 Tallest buildings
            </option>
            <option value="examples/candy_dash.json">🎃 Candy dash</option>
            <option value="examples/flockenspiel.json">🎵 Flockenspiel</option>
          </select>
        </div>
        <div id="menuright">
          <button
            class="bigbutton"
            id="toggleDesign"
            title="Design your project"
          >
            🖼️
          </button>
          <button class="bigbutton" id="togglePlay" title="Use your project">
            🎮
          </button>
          <button
            class="bigbutton"
            title="Switch between fullscreen and normal views."
            id="fullscreenToggle"
          >
            ↗️
          </button>
        </div>
      </div>
      <div id="maincontent">
        <div id="rightArea">
          <canvas id="renderCanvas" touch-action="none" tabindex="0"></canvas>
          <div class="gizmo-buttons" id="gizmoButtons">
            <div id="shape-menu">
              <!-- Gizmo button to toggle the shape menu -->
              <button
                class="gizmo-button"
                id="showShapesButton"
                style="font-size: huge"
                disabled
              >
                <strong>＋</strong>
              </button>

              <!-- Dropdown for shapes and models -->
              <span id="shapes-dropdown" style="display: none">
                <!-- Shape Row -->
                <ul id="shape-row">
                  <li onclick="selectShape('create_box')">
                    <img src="./images/box.png" alt="Box" />
                  </li>
                  <li onclick="selectShape('create_sphere')">
                    <img src="./images/sphere.png" alt="Sphere" />
                  </li>
                  <li onclick="selectShape('create_cylinder')">
                    <img src="./images/cylinder.png" alt="Cylinder" />
                  </li>
                  <li onclick="selectShape('create_capsule')">
                    <img src="./images/capsule.png" alt="Capsule" />
                  </li>
                  <li onclick="selectShape('create_plane')">
                    <img src="./images/plane.png" alt="Plane" />
                  </li>
                </ul>

                <!-- Model Row with scroll buttons -->
                <div class="scrollable-container">
                  <button
                    class="scroll-button left"
                    id="scrollModelsLeftButton"
                    disabled
                  >
                    &Lang;
                  </button>
                  <ul id="model-row">
                    <!-- Dynamically generated model items will be inserted here -->
                  </ul>
                  <button
                    class="scroll-button right"
                    id="scrollModelsRightButton"
                    disabled
                  >
                    &Rang;
                  </button>
                </div>

                <!-- Object Row -->
                <div class="scrollable-container">
                  <button
                    class="scroll-button left"
                    id="scrollObjectsLeftButton"
                    disabled
                  >
                    &Lang;
                  </button>
                  <ul id="object-row">
                    <!-- Dynamically generated object items will be inserted here -->
                  </ul>
                  <button
                    class="scroll-button right"
                    id="scrollObjectsRightButton"
                    disabled
                  >
                    &Rang;
                  </button>
                </div>

                <!-- Character Row -->
                <div class="scrollable-container">
                  <button
                    class="scroll-button left"
                    id="scrollCharactersLeftButton"
                    disabled
                  >
                    &Lang;
                  </button>
                  <ul id="character-row">
                    <!-- Dynamically generated character items will be inserted here -->
                  </ul>
                  <button
                    class="scroll-button right"
                    id="scrollCharactersRightButton"
                    disabled
                  >
                    &Rang;
                  </button>
                </div>
              </span>
            </div>
            <input type="color" id="colorPickerButton" disabled />
            <button class="gizmo-button" id="positionButton" disabled>
              Position
            </button>
            <button class="gizmo-button" id="rotationButton" disabled>
              Rotation
            </button>
            <button class="gizmo-button" id="scaleButton" disabled>
              Scale
            </button>
            <button class="gizmo-button" id="boundsButton" disabled>
              Bounds
            </button>
            <button class="gizmo-button" id="focusButton" disabled>
              Focus
            </button>
            <button class="gizmo-button" id="hideButton" disabled>Hide</button>
          </div>
        </div>
        <div id="codePanel">
          <!--button
            value="Toolbox"
            id="toolboxControl"
            style="
              z-index: 100000;
              font-size: 16px;
              border: none;
              padding: 10px;
              background-color: rgba(255, 101, 80, 0.45);
              box-sizing: border-box;
            "
          >
            <strong>+ Code</strong>
        </button-->
          <div id="blocklyDiv"></div>
        </div>
      </div>
    </div>
    <script type="module" src="/main.js"></script>
  </body>
</html>
